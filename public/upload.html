<!DOCTYPE html>
<html>
<head>
<title>CSV Upload</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/styles.css" rel="stylesheet">
</head>

<body>

<nav class="navbar navbar-dark bg-dark">
  <div class="container">
    <a href="/" class="btn btn-outline-light">Create User</a>
    <span class="navbar-brand">Bulk CSV Upload</span>
  </div>
</nav>

<div class="container mt-5">
  <div class="card p-4">

    <h4>Upload Users CSV</h4>
    <p class="text-muted">
      CSV must contain columns: name, email, age, city
    </p>

    <form id="csvForm">
      <input type="file" name="file" accept=".csv"
             class="form-control mb-3" required>

      <button class="btn btn-primary">
        Upload & Sync to Database
      </button>
    </form>

    <div id="msg" class="mt-3"></div>

  </div>
</div>

<script>
csvForm.onsubmit = async e => {
  e.preventDefault();
  const data = new FormData(csvForm);

  const res = await fetch("/api/users/upload-csv", {
    method: "POST",
    body: data
  });

  const r = await res.json();
  msg.innerHTML = `<div class="alert alert-success">
    ${r.message} â€” ${r.count} users added
  </div>`;
};
</script>

</body>
</html>